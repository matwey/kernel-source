From 60ce74c217c76a25f696a715340863d959047a27 Mon Sep 17 00:00:00 2001
From: Matt Porter <mporter@ti.com>
Date: Fri, 28 Sep 2012 15:37:52 -0400
Subject: [PATCH 3/4] ARM: dts: AM33xx PRUSS support
Patch-mainline: not yet

Adds a pruss node and an example of use on Beaglebone.

Signed-off-by: Matt Porter <mporter@ti.com>
---
 arch/arm/boot/dts/am335x-bone.dts |  4 ++++
 arch/arm/boot/dts/am33xx.dtsi     | 14 ++++++++++++++
 2 files changed, 18 insertions(+)

diff --git a/arch/arm/boot/dts/am335x-bone.dts b/arch/arm/boot/dts/am335x-bone.dts
index 6b849372..b51e91c 100644
--- a/arch/arm/boot/dts/am335x-bone.dts
+++ b/arch/arm/boot/dts/am335x-bone.dts
@@ -24,3 +24,7 @@
 &mmc1 {
 	vmmc-supply = <&ldo3_reg>;
 };
+
+&pruss {
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/am33xx.dtsi b/arch/arm/boot/dts/am33xx.dtsi
index d23e252..ec052ce 100644
--- a/arch/arm/boot/dts/am33xx.dtsi
+++ b/arch/arm/boot/dts/am33xx.dtsi
@@ -76,11 +76,25 @@
 	 * that are not memory mapped in the MPU view or for the MPU itself.
 	 */
 	soc {
+		#address-cells = <1>;
+		#size-cells = <1>;
+
 		compatible = "ti,omap-infra";
 		mpu {
 			compatible = "ti,omap3-mpu";
 			ti,hwmods = "mpu";
 		};
+
+		pruss: pruss@4a300000 {
+			compatible = "ti,pruss-v2";
+			ti,hwmods = "pruss";
+			ti,deassert-hard-reset = "pruss", "pruss";
+			reg = <0x4a300000 0x080000>;
+			ti,pintc-offset = <0x20000>;
+			interrupt-parent = <&intc>;
+			interrupts = <20 21 22 23 24 25 26 27>;
+			status = "disabled";
+		};
 	};
 
 	/*
-- 
2.1.4

